/**    
 * 文件名：DataRow.java    
 *    
 * 版本信息：    
 * 日期：2018年3月17日    
 * Copyright 足下 Corporation 2018     
 * 版权所有    
 *    
 */
package JXMLTable;

import java.util.Arrays;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Map.Entry;

import com.alibaba.fastjson.JSONObject;

/**    
 *     
 * 项目名称：DBAcess    
 * 类名称：DataRow    
 * 类描述：    
 * 创建人：jinyu    
 * 创建时间：2018年3月17日 下午5:20:08    
 * 修改人：jinyu    
 * 修改时间：2018年3月17日 下午5:20:08    
 * 修改备注：    
 * @version     
 *     
 */
public class DataXmlRow {
    
    /**
     * name value
     */
private HashMap<String,Object>  rowValue=new HashMap<String,Object>();

/**
 * id,name
 */
private HashMap<String,String>  keyName=new HashMap<String,String>();
private int[] keyindexs=null;
private int index=0;
public int id=-1;
public boolean loadRow(Object[]obj)
{
    if(obj==null||obj.length<keyName.size())
    {
        return false;
    }
  
    //
   for(int i=0;i<keyindexs.length;i++)
   {
       setValue(keyindexs[i],obj[i]);
   }
return true;
}
public String getRow()
{
   JSONObject data=new JSONObject();
    Iterator<Map.Entry<String, String>>  it=  keyName.entrySet().iterator();  
      while(it.hasNext()){  
          Map.Entry<String, String> item=   it.next();  
          String key=item.getKey();  
          Object value=rowValue.getOrDefault(item.getValue(),null);  
           data.put(key, value);
      }  
return data.toJSONString();
}
public void setIndex(int index)
{
    this.index=index;
}
public int getIndex()
{
    return index;
}
public DataXmlRow(HashMap<String,String> map,int id)
{
    keyName=map;
    keyindexs=new int[keyName.size()];
    Iterator<Entry<String, String>> it= keyName.entrySet().iterator();
    int index=0;
    while(it.hasNext())
    {
        Entry<String, String> v=it.next();
        String key=v.getKey();
        String value=v.getValue();
        rowValue.put(value, null);//初始化
        keyindexs[index++]=Integer.valueOf(key);
    }
    Arrays.sort(keyindexs);
}
public  DataXmlRow(HashMap<String,String> index,HashMap<String,Object> map,int id)
{
    keyName=index;//id,name map:id value
     Iterator<Entry<String, Object>> it = map.entrySet().iterator();
     while(it.hasNext())
     {
        Entry<String, Object> item = it.next();
         String name=keyName.getOrDefault(it., defaultValue)
         rowValue.put(keyName.getOrDefault(key, defaultValue), value);
     }
    
}
public void setValue(String columnName,Object value)
{
    rowValue.put(columnName, value);
}
public void setValue(int column,Object value)
{
    if(column>keyindexs.length)
    {
        return;
    }
  String name=  keyName.getOrDefault(keyindexs[column], null);
  if(name!=null)
  {
      rowValue.put(name, value);
  }
}
public Object getValue(String columnName)
{
   return  rowValue.getOrDefault(columnName, null);
}
public Object getValue(int column)
{
    if(column>keyindexs.length)
    {
        return null;
    }
    String name=  keyName.getOrDefault(keyindexs[column], null);
    if(name!=null)
    {
     return   rowValue.getOrDefault(name, null);
    }
    return null;
}
}
